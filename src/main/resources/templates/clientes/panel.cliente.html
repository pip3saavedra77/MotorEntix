<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Mi Perfil - MotorEntix</title>
	<link rel="stylesheet" th:href="@{/css/panel.cliente.css}">
	<link rel="stylesheet" th:href="@{/css/cssPanelCliente/perfil.css}">
</head>

<body>
	<header>
		<div class="logo">
			<h1>MotorEntix</h1>
		</div>
		<div class="user-info">
			<div class="user-menu">
				<button type="button" class="user-menu-toggle">
					<span class="user-name-label" th:if="${usuario != null}"
					      th:text="${usuario.nombre} + ' ' + ${usuario.apellido}">Usuario</span>
					<span class="user-name-label" th:unless="${usuario != null}">Invitado</span>
					<div class="user-avatar" th:if="${usuario != null}" th:text="${usuario.nombre.substring(0, 1)}">U</div>
					<div class="user-avatar" th:unless="${usuario != null}">I</div>
					<span class="user-menu-arrow">â–¾</span>
				</button>
				<div class="user-menu-dropdown">
					<a th:href="@{/panel.cliente}" class="user-menu-item">
						<span>ğŸ‘¤ Mi perfil</span>
					</a>
					<a th:href="@{/editar-perfil}" class="user-menu-item">
						<span>âœï¸ Editar perfil</span>
					</a>
					<div class="user-menu-divider"></div>
					<a th:href="@{/logout}" class="user-menu-item user-menu-item-danger">
						<span>ğŸšª Cerrar sesiÃ³n</span>
					</a>
				</div>
			</div>
		</div>
	</header>

	<div class="container">
		<nav class="sidebar">
			<ul class="sidebar-menu">
				<li class="menu-item active">
					<a th:href="@{/panel.cliente}" class="menu-link">
						<span>ğŸ‘¤</span> Mi Perfil
					</a>
				</li>
				<li class="menu-item">
					<a th:href="@{/mis-vehiculos}" class="menu-link">
						<span>ğŸš—</span> Mis VehÃ­culos
					</a>
				</li>
				<li class="menu-item">
					<a th:href="@{/reservasCliente}" class="menu-link">
						<span>ğŸ“‹</span> Reservas
					</a>
				</li>
				<li class="menu-item">
					<a th:href="@{/historial}" class="menu-link">
						<span>ğŸ“Š</span> Historial
					</a>
				</li>
				<li class="menu-item">
					<a th:href="@{/servicios}" class="menu-link">
						<span>ğŸ”§</span> Servicios
					</a>
				</li>
				<li class="menu-item">
					<a th:href="@{/logout}" class="menu-link">
						<span>ğŸšª</span> Cerrar SesiÃ³n
					</a>
				</li>
			</ul>
		</nav>

		<main class="main-content">
			<div class="page-header">
				<h1 class="page-title">Mi Perfil</h1>
			</div>

			<!-- Tarjeta de Bienvenida -->
			<div class="welcome-card">
				<h3 th:if="${usuario != null}">Â¡Bienvenido, <span th:text="${usuario.nombre}"></span>!</h3>
				<h3 th:unless="${usuario != null}">Â¡Bienvenido!</h3>
				<p>AquÃ­ puedes gestionar tu informaciÃ³n personal, ver tu historial y configurar tus preferencias.</p>
			</div>

			<!-- InformaciÃ³n del Perfil -->
			<div class="profile-section">
				<div class="profile-avatar-section" th:if="${usuario != null}">
					<div class="profile-avatar-large" th:text="${usuario.nombre.substring(0, 1)}">U</div>
					<h2 th:text="${usuario.nombre} + ' ' + ${usuario.apellido}">Nombre Apellido</h2>
					<p th:text="${usuario.correo}">usuario@ejemplo.com</p>
				</div>
				<div class="table-header">
					<h2 class="table-title">InformaciÃ³n Personal</h2>
					<div class="table-actions">
						<a th:href="@{/editar-perfil}" class="btn btn-primary">
							<span>âœï¸</span> Editar Perfil
						</a>
					</div>
				</div>

				<div class="profile-info-grid">
					<div class="profile-info-item">
						<label class="input-label">Nombre Completo</label>
						<div class="profile-info-value" th:if="${usuario != null}"
							th:text="${usuario.nombre} + ' ' + ${usuario.apellido}">
							Nombre Apellido
						</div>
						<div class="profile-info-value" th:unless="${usuario != null}">
							No disponible
						</div>
					</div>

					<div class="profile-info-item">
						<label class="input-label">Correo ElectrÃ³nico</label>
						<div class="profile-info-value" th:if="${usuario != null}" th:text="${usuario.correo}">
							usuario@ejemplo.com
						</div>
						<div class="profile-info-value" th:unless="${usuario != null}">
							No disponible
						</div>
					</div>

					<div class="profile-info-item">
						<label class="input-label">TelÃ©fono</label>
						<div class="profile-info-value" th:if="${usuario != null}" th:text="${usuario.telefono}">
							+1234567890
						</div>
						<div class="profile-info-value" th:unless="${usuario != null}">
							No disponible
						</div>
					</div>

					<div class="profile-info-item">
						<label class="input-label">DirecciÃ³n</label>
						<div class="profile-info-value" th:if="${usuario != null}" th:text="${usuario.direccion}">
							Calle Ejemplo #123
						</div>
						<div class="profile-info-value" th:unless="${usuario != null}">
							No disponible
						</div>
					</div>

					<div class="profile-info-item">
						<label class="input-label">Estado de Cuenta</label>
						<div th:if="${usuario != null}">
							<span th:if="${usuario.estado == 'activo'}" class="status-indicator status-available"
								th:text="${usuario.estado}">Activa</span>
							<span th:if="${usuario.estado == 'inactivo'}" class="status-indicator status-pending"
								th:text="${usuario.estado}">Inactiva</span>
							<span th:if="${usuario.estado != 'activo' and usuario.estado != 'inactivo'}"
								class="status-indicator status-suspended" th:text="${usuario.estado}">Suspendida</span>
						</div>
						<div th:unless="${usuario != null}">
							<span class="status-indicator status-pending">No disponible</span>
						</div>
					</div>

					<div class="profile-info-item">
						<label class="input-label">Rol</label>
						<div class="profile-info-value" th:if="${usuario != null}" th:text="${usuario.rol}">
							Cliente
						</div>
						<div class="profile-info-value" th:unless="${usuario != null}">
							No disponible
						</div>
					</div>
				</div>
			</div>

			<!-- EstadÃ­sticas del Usuario - VALORES FIJOS -->
			<div class="stats-cards">
				<div class="stat-card">
					<div class="stat-value">0</div>
					<div class="stat-label">VehÃ­culos Registrados</div>
				</div>

				<div class="stat-card">
					<div class="stat-value">0</div>
					<div class="stat-label">Reservas Realizadas</div>
				</div>

				<div class="stat-card">
					<div class="stat-value">0</div>
					<div class="stat-label">Facturas Generadas</div>
				</div>

				<div class="stat-card">
					<div class="stat-value">4.8</div>
					<div class="stat-label">CalificaciÃ³n Promedio</div>
				</div>
			</div>

			<!-- ConfiguraciÃ³n de Preferencias -->
			<div class="profile-section">
				<div class="table-header">
					<h2 class="table-title">Preferencias</h2>
				</div>

				<div class="preferences-grid">
					<div class="preference-item">
						<label class="input-label">Notificaciones por Email</label>
						<label class="toggle-switch">
							<input type="checkbox" checked>
							<span class="toggle-slider"></span>
						</label>
					</div>

					<div class="preference-item">
						<label class="input-label">Recordatorios de Mantenimiento</label>
						<label class="toggle-switch">
							<input type="checkbox" checked>
							<span class="toggle-slider"></span>
						</label>
					</div>

					<div class="preference-item">
						<label class="input-label">Noticias y Promociones</label>
						<label class="toggle-switch">
							<input type="checkbox">
							<span class="toggle-slider"></span>
						</label>
					</div>
				</div>
			</div>
		</main>
	</div>

	<script>
		// Dropdown de usuario en header (panel cliente)
		document.addEventListener('DOMContentLoaded', function () {
			const userMenu = document.querySelector('.user-menu');
			if (!userMenu) return;
			const toggle = userMenu.querySelector('.user-menu-toggle');
			if (!toggle) return;

			function closeMenu() {
				userMenu.classList.remove('open');
			}

			toggle.addEventListener('click', function (event) {
				event.stopPropagation();
				userMenu.classList.toggle('open');
			});

			document.addEventListener('click', function () {
				closeMenu();
			});
		});
	</script>
</body>

</html>