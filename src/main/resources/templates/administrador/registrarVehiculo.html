<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Agregar Veh√≠culo - MotorEntix</title>
	<link rel="stylesheet" th:href="@{/css/panel.admin.css}">
	<link rel="stylesheet" th:href="@{/css/registrarVehiculo.css}">
</head>

<body>
	<header>
		<div class="logo">
			<h1>MotorEntix</h1>
		</div>
		<div class="user-info">
			<div class="user-menu">
				<button type="button" class="user-menu-toggle">
					<span class="user-name-label" th:if="${usuario != null}"
					      th:text="${usuario.nombre} + ' ' + ${usuario.apellido}">Administrador</span>
					<span class="user-name-label" th:unless="${usuario != null}">Administrador</span>
					<div class="user-avatar" th:if="${usuario != null}" th:text="${usuario.nombre.substring(0, 1)}">A</div>
					<div class="user-avatar" th:unless="${usuario != null}">A</div>
					<span class="user-menu-arrow">‚ñæ</span>
				</button>
				<div class="user-menu-dropdown">
					<a th:href="@{/admin/mi-perfil}" class="user-menu-item">
						<span>üë§ Mi perfil</span>
					</a>
					<a th:href="@{/editar-perfil}" class="user-menu-item">
						<span>‚úèÔ∏è Editar perfil</span>
					</a>
					<div class="user-menu-divider"></div>
					<a th:href="@{/logout}" class="user-menu-item user-menu-item-danger">
						<span>üö™ Cerrar sesi√≥n</span>
					</a>
				</div>
			</div>
		</div>
	</header>

	<div class="container">
		<nav class="sidebar">
			<ul class="sidebar-menu">
				<li class="menu-item">
					<a th:href="@{/admin/mi-perfil}" style="text-decoration: none; color: inherit;">
						<span>üë§</span> Mi Perfil
					</a>
				</li>
				<li class="menu-item active">
					<a th:href="@{/admin/vehiculos}" style="text-decoration: none; color: inherit;">
						<span>üöó</span> Veh√≠culos
					</a>
				</li>
				<li class="menu-item">
					<a th:href="@{/admin/inventario}" style="text-decoration: none; color: inherit;">
						<span>üì¶</span> Inventario
					</a>
				</li>
				<li class="menu-item">
					<a th:href="@{/admin/proveedor}" style="text-decoration: none; color: inherit;">
						<span>üè¢</span> Proveedor
					</a>
				</li>
				<li class="menu-item">
					<a th:href="@{/admin/clientes}" style="text-decoration: none; color: inherit;">
						<span>üë•</span> Clientes
					</a>
				</li>
				<li class="menu-item">
					<a th:href="@{/admin/reservas}" style="text-decoration: none; color: inherit;">
						<span>üìã</span> Reservas
					</a>
				</li>
				<li class="menu-item">
					<a th:href="@{/admin/pagos}" style="text-decoration: none; color: inherit;">
						<span>üí∞</span> Pagos
					</a>
				</li>
			</ul>
		</nav>

		<main class="main-content">
			<div class="page-header">
				<h2 class="page-title">Agregar Nuevo Veh√≠culo</h2>
				<button class="btn btn-secondary" onclick="window.history.back()">‚Üê Volver</button>
			</div>

			<div class="form-container">
				<!-- üìå Formulario conectado a Spring Boot -->
				<form class="vehicle-form" th:action="@{/admin/vehiculos/guardar}" th:object="${vehiculo}"
					method="post">

					<div class="form-section">
						<h3 class="section-title">Informaci√≥n B√°sica del Veh√≠culo</h3>

						<div class="form-group">
							<label for="marca" class="form-label">Marca *</label>
							<select id="marca" th:field="*{marca}" class="form-select" required>
								<option value="">Seleccione una marca</option>
								<option value="Toyota">Toyota</option>
								<option value="Honda">Honda</option>
								<option value="Nissan">Nissan</option>
								<option value="Ford">Ford</option>
								<option value="Chevrolet">Chevrolet</option>
								<option value="Volkswagen">Volkswagen</option>
								<option value="BMW">BMW</option>
								<option value="Mercedes">Mercedes-Benz</option>
								<option value="Audi">Audi</option>
								<option value="Tesla">Tesla</option>
								<option value="Hyundai">Hyundai</option>
								<option value="Kia">Kia</option>
								<option value="Mazda">Mazda</option>
								<option value="Subaru">Subaru</option>
								<option value="Otra">Otra</option>
							</select>
						</div>

						<div class="form-group">
							<label for="modelo" class="form-label">Modelo *</label>
							<input type="text" th:field="*{modelo}" class="form-input"
								placeholder="Ej: Corolla, Civic, Model 3" required>
						</div>

						<div class="form-group">
							<label for="anio" class="form-label">A√±o *</label>
							<input type="number" th:field="*{anio}" min="2000" max="2100" class="form-input" required>
						</div>

						<div class="form-group">
							<label for="version" class="form-label">Versi√≥n/Trim</label>
							<input type="text" th:field="*{version}" class="form-input"
								placeholder="Ej: LE, EX, Luxury">
						</div>
					</div>

					<div class="form-section">
						<h3 class="section-title">Detalles del Veh√≠culo</h3>

						<div class="form-row">
							<div class="form-group">
								<label for="tipo" class="form-label">Tipo de Veh√≠culo</label>
								<select th:field="*{tipoVehiculo}" class="form-select">
									<option value="">Seleccione tipo</option>
									<option value="Sedan">Sed√°n</option>
									<option value="SUV">SUV</option>
									<option value="Hatchback">Hatchback</option>
									<option value="Pickup">Pickup</option>
									<option value="Deportivo">Deportivo</option>
									<option value="Van">Van</option>
									<option value="Coupe">Coup√©</option>
								</select>
							</div>

							<div class="form-group">
								<label for="transmision" class="form-label">Transmisi√≥n</label>
								<select th:field="*{transmicion}" class="form-select">
									<option value="">Seleccione transmisi√≥n</option>
									<option value="Autom√°tica">Autom√°tica</option>
									<option value="Manual">Manual</option>
									<option value="Semi-autom√°tica">Semi-autom√°tica</option>
								</select>
							</div>
						</div>

						<div class="form-row">
							<div class="form-group">
								<label for="combustible" class="form-label">Combustible</label>
								<select th:field="*{combustible}" class="form-select">
									<option value="">Seleccione combustible</option>
									<option value="Gasolina">Gasolina</option>
									<option value="Diesel">Di√©sel</option>
									<option value="H√≠brido">H√≠brido</option>
									<option value="El√©ctrico">El√©ctrico</option>
								</select>
							</div>

							<div class="form-group">
								<label for="combustible" class="form-label">Estado</label>
								<select th:field="*{estadoVehiculo}" class="form-select">
									<option value="">Seleccione el estado</option>
									<option value="EnMantenimiento">en mantenimiento</option>
									<option value="Realizado">realizado</option>
						
								</select>
							</div>

							<div class="form-group">
								<label for="color" class="form-label">Color</label>
								<input type="text" th:field="*{color}" class="form-input"
									placeholder="Color del veh√≠culo">
							</div>
						</div>

						<div class="form-group">
							<label for="placa" class="form-label">N√∫mero de Placa</label>
							<input type="text" th:field="*{placa}" class="form-input" placeholder="N√∫mero de placa">
						</div>
					</div>

					<div class="form-section">
						<h3 class="section-title">Caracter√≠sticas Adicionales</h3>

						<div class="form-group">
							<label for="descripcion" class="form-label">Descripci√≥n</label>
							<textarea th:field="*{descripcion}" class="form-textarea"
								placeholder="Descripci√≥n adicional del veh√≠culo..." rows="4"></textarea>
						</div>
					</div>

					<div class="form-actions">
						<button type="button" class="btn btn-secondary"
							onclick="window.history.back()">Cancelar</button>
						<button type="reset" class="btn btn-outline">Limpiar Formulario</button>
						<button type="submit" class="btn btn-primary">Agregar Veh√≠culo</button>
					</div>
				</form>
			</div>

			<hr>

		</main>
	</div>

	<script>
		// Dropdown de usuario en header (todas las instancias .user-menu de la p√°gina)
		document.addEventListener('DOMContentLoaded', function () {
			const userMenus = document.querySelectorAll('.user-menu');
			if (!userMenus.length) return;

			function closeAllMenus() {
				userMenus.forEach(m => m.classList.remove('open'));
			}

			userMenus.forEach(function (userMenu) {
				const toggle = userMenu.querySelector('.user-menu-toggle');
				if (!toggle) return;

				toggle.addEventListener('click', function (event) {
					event.stopPropagation();
					const isOpen = userMenu.classList.contains('open');
					closeAllMenus();
					if (!isOpen) {
						userMenu.classList.add('open');
					}
				});
			});

			document.addEventListener('click', function () {
				closeAllMenus();
			});
		});
	</script>
</body>

</html>