<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gesti贸n de Inventario - MotorEntix</title>
  <link rel="stylesheet" th:href="@{/css/panel.admin.css}">
  <style>
    .inventory-page {
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
    }

    .inventory-card {
      background: linear-gradient(135deg, #ffffff 0%, #f6f7fb 100%);
      border-radius: 16px;
      box-shadow: 0 14px 30px rgba(0, 0, 0, 0.12);
      padding: 1.75rem 2rem;
      border: 1px solid rgba(255, 255, 255, 0.7);
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .inventory-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 18px 40px rgba(0, 0, 0, 0.16);
    }

    .inventory-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1.25rem;
    }

    .inventory-header-title {
      font-size: 1.3rem;
      font-weight: 600;
      color: #111827;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .inventory-header-title span.icon {
      font-size: 1.4rem;
    }

    .inventory-subtitle {
      font-size: 0.9rem;
      color: #6b7280;
      margin-bottom: 1rem;
    }

    .inventory-form .form-row {
      display: grid;
      grid-template-columns: repeat(4, minmax(0, 1fr));
      gap: 1rem 1.5rem;
    }

    .inventory-form .form-group {
      display: flex;
      flex-direction: column;
      gap: 0.35rem;
    }

    .inventory-form label {
      font-size: 0.85rem;
      font-weight: 600;
      color: #374151;
    }

    .inventory-form .search-input,
    .inventory-form select {
      border-radius: 999px;
      border: 1px solid #d1d5db;
      padding: 0.55rem 0.9rem;
      font-size: 0.9rem;
      background-color: #f9fafb;
      transition: border-color 0.15s ease, box-shadow 0.15s ease, background-color 0.15s ease, transform 0.1s ease;
    }

    .inventory-form .search-input:focus,
    .inventory-form select:focus {
      outline: none;
      border-color: #f97316;
      box-shadow: 0 0 0 2px rgba(249, 115, 22, 0.25);
      background-color: #ffffff;
      transform: translateY(-1px);
    }

    .inventory-form .btn-primary {
      border-radius: 999px;
      padding: 0.6rem 1.4rem;
      font-weight: 600;
      display: inline-flex;
      align-items: center;
      gap: 0.4rem;
      box-shadow: 0 10px 20px rgba(249, 115, 22, 0.35);
      transition: transform 0.15s ease, box-shadow 0.15s ease, background 0.15s ease;
    }

    .inventory-form .btn-primary:hover {
      transform: translateY(-1px);
      box-shadow: 0 14px 26px rgba(249, 115, 22, 0.45);
    }

    .inventory-form .btn-primary:active {
      transform: translateY(0px) scale(0.98);
      box-shadow: 0 6px 12px rgba(249, 115, 22, 0.35);
    }

    .inventory-form .btn-clear {
      border-radius: 999px;
      padding: 0.55rem 1.1rem;
      font-size: 0.85rem;
      border: 1px solid #d1d5db;
      color: #4b5563;
      background: #ffffff;
      transition: background 0.15s ease, color 0.15s ease, border-color 0.15s ease;
    }

    .inventory-form .btn-clear:hover {
      background: #f3f4f6;
      border-color: #9ca3af;
      color: #111827;
    }

    .inventory-meta {
      font-size: 0.8rem;
      color: #6b7280;
      margin-top: 0.5rem;
    }

    .inventory-meta span.badge {
      background: rgba(37, 99, 235, 0.1);
      color: #1d4ed8;
      padding: 0.2rem 0.6rem;
      border-radius: 999px;
      font-weight: 600;
      margin-left: 0.25rem;
    }

    .inventory-table-title {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 0.6rem;
    }

    .inventory-table-title h3 {
      margin: 0;
    }

    .inventory-table-title small {
      font-size: 0.8rem;
      color: #6b7280;
    }

    .inventory-empty {
      padding: 2rem 1rem;
      text-align: center;
      color: #6b7280;
      font-size: 0.9rem;
    }

    .inventory-empty span {
      display: inline-flex;
      align-items: center;
      gap: 0.35rem;
    }

    @media (max-width: 900px) {
      .inventory-form .form-row {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
    }

    @media (max-width: 600px) {
      .inventory-form .form-row {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>

<body>
  <header>
    <div class="logo">
      <h1>MotorEntix</h1>
    </div>
    <div class="user-info">
      <span>Administrador</span>
      <div class="user-avatar">A</div>
    </div>
  </header>

  <div class="container">
    <nav class="sidebar">
      <ul class="sidebar-menu">
        <li class="menu-item">
          <a th:href="@{/admin/mi-perfil}" style="text-decoration: none; color: inherit;">
            <span></span> Mi Perfil
          </a>
        </li>
        <li class="menu-item">
          <a th:href="@{/admin/vehiculos}" style="text-decoration: none; color: inherit;">
            <span></span> Veh铆culos
          </a>
        </li>
        <li class="menu-item active">
          <a th:href="@{/admin/inventario}" style="text-decoration: none; color: inherit;">
            <span></span> Inventario
          </a>
        </li>
        <li class="menu-item">
          <a th:href="@{/admin/proveedor}" style="text-decoration: none; color: inherit;">
            <span></span> Proveedor
          </a>
        </li>
        <li class="menu-item">
          <a th:href="@{/admin/clientes}" style="text-decoration: none; color: inherit;">
            <span></span> Clientes
          </a>
        </li>
        <li class="menu-item">
          <a th:href="@{/admin/reservas}" style="text-decoration: none; color: inherit;">
            <span></span> Reservas
          </a>
        </li>
        <li class="menu-item">
          <a th:href="@{/admin/pagos}" style="text-decoration: none; color: inherit;">
            <span></span> Pagos
          </a>
        </li>
        <li class="menu-item">
          <a th:href="@{/admin/configuracion}" style="text-decoration: none; color: inherit;">
            <span>锔</span> Configuraci贸n
          </a>
        </li>
      </ul>
    </nav>

    <main class="main-content">
      <div class="page-header">
        <h2 class="page-title" th:text="${editMode} ? 'Editar Producto de Inventario' : 'Gesti贸n de Inventario'"></h2>
      </div>

      <div class="inventory-page">
        <section class="inventory-card">
          <div class="inventory-header">
            <div>
              <h3 class="inventory-header-title">
                <span class="icon"></span>
                <span th:text="${editMode} ? 'Editar producto de inventario' : 'Agregar nuevo producto'"></span>
              </h3>
              <p class="inventory-subtitle">
                Completa los campos para registrar o actualizar un producto.
              </p>
            </div>
          </div>

          <form th:action="@{/admin/inventario/guardar}" method="post" th:object="${inventario}"
            class="inventory-form">
          <input type="hidden" th:field="*{id}">

          <div class="form-row">
            <div class="form-group">
              <label for="nombre">Nombre del producto</label>
              <input type="text" id="nombre" th:field="*{nombre}" required class="search-input">
            </div>

            <div class="form-group">
              <label for="cantidad">Cantidad en stock</label>
              <input type="number" id="cantidad" th:field="*{cantidad}" min="0" required class="search-input">
            </div>

            <div class="form-group">
              <label for="precioUnitario">Precio unitario</label>
              <input type="number" id="precioUnitario" th:field="*{precioUnitario}" min="0" step="0.01"
                class="search-input">
            </div>

			<div class="form-group">
			  <label for="proveedorSelect">Proveedor</label>
			  <select id="proveedorSelect" th:field="*{proveedor.id}" required class="search-input">
				<option value="" disabled th:if="${inventario.proveedor} == null" selected>Seleccione un proveedor</option>
				<option th:each="prov : ${proveedores}" th:value="${prov.id}" th:text="${prov.nombre}"></option>
			  </select>
			</div>
          </div>

          <div style="margin-top: 1rem; display: flex; gap: 1rem; align-items: center;">
            <button type="submit" class="btn btn-primary">
              <span th:text="${editMode} ? 'Actualizar producto' : 'Agregar producto'"></span>
            </button>
            <a th:if="${editMode}" th:href="@{/admin/inventario/lista}" class="btn btn-clear">Cancelar edici贸n</a>
          </div>

          <p class="inventory-meta">
            <span>Campos marcados son obligatorios.</span>
            <span class="badge" th:text="${inventarios != null ? inventarios.size() : 0} + ' productos registrados'"></span>
          </p>
        </form>
        </section>

        <section class="inventory-card">
          <div class="inventory-table-title">
            <h3 class="table-title">Productos en Inventario</h3>
            <small th:text="${inventarios != null ? inventarios.size() : 0} + ' 铆tems'">0 铆tems</small>
          </div>

          <div class="table-wrapper">
            <table>
            <thead>
              <tr>
                <th>ID</th>
                <th>Nombre</th>
                <th>Cantidad</th>
                <th>Precio Unitario</th>
                <th>Acciones</th>
              </tr>
            </thead>
            <tbody>
              <tr th:each="item : ${inventarios}">
                <td th:text="${item.id}"></td>
                <td th:text="${item.nombre}"></td>
                <td th:text="${item.cantidad}"></td>
                <td th:text="${item.precioUnitario}"></td>
                <td>
                  <a th:href="@{/admin/inventario/editar/{id}(id=${item.id})}" class="btn-action btn-edit">Editar</a>
                  <form th:action="@{/admin/inventario/eliminar/{id}(id=${item.id})}" method="post"
                    style="display:inline;">
                    <button type="submit" class="btn-action btn-delete"
                      onclick="return confirm('驴Seguro que deseas eliminar este producto?');">Eliminar</button>
                  </form>
                </td>
              </tr>

              <tr th:if="${inventarios == null or inventarios.empty}">
                <td colspan="5" class="inventory-empty">
                  <span>
                    <span></span>
                    <span>No hay productos en el inventario. Agrega el primero usando el formulario superior.</span>
                  </span>
                </td>
              </tr>
            </tbody>
          </table>
          </div>
        </section>
      </div>
    </main>
  </div>
</body>

</html>
