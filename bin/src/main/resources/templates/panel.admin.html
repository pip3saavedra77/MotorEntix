<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Panel de Administración - MotorEntix</title>
	<link rel="stylesheet" th:href="@{/css/panel.admin.css}">
</head>

<body>
	<header>
		<div class="logo">
			<h1>MotorEntix</h1>
		</div>
		<div class="user-info">
			<span>Administrador</span>
			<div class="user-avatar">A</div>
		</div>
	</header>

	<div class="container">
		<nav class="sidebar">
			<ul class="sidebar-menu">
				<li class="menu-item active">
					<span>📊</span> Dashboard
				</li>
				<li class="menu-item">
					<span>🚗</span> Vehículos
				</li>
				<li class="menu-item">
					<span>👥</span> Clientes
				</li>
				<li class="menu-item">
					<span>📋</span> Reservas
				</li>
				<li class="menu-item">
					<span>💰</span> Pagos
				</li>
				<li class="menu-item">
					<span>⚙️</span> Configuración
				</li>
				<li class="menu-item">
					<span>📈</span> Reportes
				</li>
			</ul>
		</nav>

		<main class="main-content">
			<div class="page-header">
				<h2 class="page-title">Panel de Administración</h2>
				<button class="btn btn-primary">Generar Reporte</button>
			</div>

			<div class="stats-cards">
				<div class="stat-card">
					<div class="stat-value">24</div>
					<div class="stat-label">Vehículos Activos</div>
				</div>
				<div class="stat-card">
					<div class="stat-value">156</div>
					<div class="stat-label">Reservas del Mes</div>
				</div>
				<div class="stat-card">
					<div class="stat-value">$45,230</div>
					<div class="stat-label">Ingresos Totales</div>
				</div>
				<div class="stat-card">
					<div class="stat-value">92%</div>
					<div class="stat-label">Tasa de Ocupación</div>
				</div>
			</div>

			<!-- Mensaje de resultados de búsqueda -->
			<div th:if="${searchTerm}" class="search-results-info">
				<p>Resultados de búsqueda para: "<span th:text="${searchTerm}"></span>"
					- <span th:text="${vehiculos.size()}"></span> vehículos encontrados</p>
			</div>

			<div class="table-container">
				<div class="table-header">
					<h3 class="table-title">Vehículos Disponibles</h3>
					<div class="table-actions">
						<!-- Barra de Búsqueda al lado del botón Agregar -->
						<form th:action="@{/admin/panel}" method="get" class="search-form">
							<div class="search-container">
								<input type="text" name="search" th:value="${searchTerm}"
									placeholder="Buscar vehículos..." class="search-input">
								<button type="submit" class="btn btn-search">🔍</button>
								<a th:href="@{/admin/panel}" class="btn btn-clear" th:if="${searchTerm}"
									title="Limpiar búsqueda">❌</a>
							</div>
						</form>
						<a th:href="@{/admin/registrar}" class="btn btn-primary"> Agregar Vehículo</a>
					</div>
				</div>

				<table>
					<thead>
						<tr>
							<th>ID</th>
							<th>Placa</th>
							<th>Marca</th>
							<th>Modelo</th>
							<th>Año</th>
							<th>Version</th>
							<th>Tipo de vehiculo</th>
							<th>Transmicion</th>
							<th>Combustible</th>
							<th>Color</th>
							<th>Estado</th>
							<th>Descripcion</th>
							<th>Acciones</th>
						</tr>
					</thead>
					<tbody>
						<tr th:each="vehiculo : ${vehiculos}">
							<td th:text="${vehiculo.id_vehiculo}"></td>
							<td th:text="${vehiculo.placa}"></td>
							<td th:text="${vehiculo.marca}"></td>
							<td th:text="${vehiculo.modelo}"></td>
							<td th:text="${vehiculo.anio}"></td>
							<td th:text="${vehiculo.version}"></td>
							<td th:text="${vehiculo.tipoVehiculo}"></td>
							<td th:text="${vehiculo.transmicion}"></td>
							<td th:text="${vehiculo.combustible}"></td>
							<td th:text="${vehiculo.color}"></td>
							<td th:text="${vehiculo.estadoVehiculo}"></td>
							<td th:text="${vehiculo.descripcion}"></td>
							<td>
								<a th:href="@{/admin/vehiculos/editar/{id}(id=${vehiculo.id_vehiculo})}"
									class="btn-action btn-edit">Editar</a>
								<form th:action="@{/admin/vehiculos/eliminar/{id}(id=${vehiculo.id_vehiculo})}"
									method="post" style="display:inline;">
									<button type="submit" class="btn-action btn-delete"
										onclick="return confirm('¿Seguro que deseas eliminar este vehículo?')">
										Eliminar
									</button>
								</form>
							</td>
						</tr>
						<tr th:if="${vehiculos.empty}">
							<td colspan="13" style="text-align: center;">
								<span th:if="${searchTerm}">No se encontraron vehículos que coincidan con tu
									búsqueda.</span>
								<span th:unless="${searchTerm}">No hay vehículos registrados.</span>
							</td>
						</tr>
					</tbody>
				</table>
			</div>
		</main>
	</div>
</body>

</html>